import{j as e}from"./app-Nug6AceN.js";import{r as i,G as y,S as v,x as w,A as h}from"./inertia-BH-W5z_F.js";import{A as k}from"./AdminLayout-BciyKWd9.js";import{F as S,a as C,b as F}from"./TrashIcon-D85zUF_K.js";import{F as R}from"./MagnifyingGlassIcon-CRB_Avht.js";import{F as A}from"./UserCircleIcon-rrmHgEP7.js";import{F as D}from"./ShieldCheckIcon-DJu35A1u.js";import{F as _}from"./AcademicCapIcon-BCHxvkWX.js";import{f as $}from"./format-Dl1nktRO.js";import{i as P}from"./id-BzV5ZBcg.js";import"./vendor-B3w1EZq-.js";import"./clsx-wMeOeRoz.js";import"./XMarkIcon-DRZff1gW.js";import"./DocumentTextIcon-Bv7v4BJx.js";import"./ChartBarIcon-C_T0qa3q.js";function V({users:t,filters:c}){const[d,u]=i.useState(c.search||""),[o,g]=i.useState(c.role||""),[j,r]=i.useState(!1),[l,m]=i.useState(null),s=y({name:"",email:"",phone:"",school:"",password:"",password_confirmation:"",role:"siswa"}),x=()=>{h.get(route("admin.users.index"),{search:d,role:o},{preserveState:!0})},p=(a=null)=>{a?(m(a),s.setData({name:a.name,email:a.email,phone:a.phone||"",school:a.school||"",password:"",password_confirmation:"",role:a.role})):(m(null),s.reset()),r(!0)},f=a=>{a.preventDefault(),l?s.put(route("admin.users.update",l.id),{onSuccess:()=>r(!1)}):s.post(route("admin.users.store"),{onSuccess:()=>r(!1)})},N=a=>{confirm(`Hapus user "${a.name}"? Semua data terkait akan ikut terhapus.`)&&h.delete(route("admin.users.destroy",a.id))},b=a=>a==="admin"?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-purple-100 text-purple-700 rounded-full text-xs font-medium",children:[e.jsx(D,{className:"w-3 h-3"}),"Admin"]}):e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-medium",children:[e.jsx(_,{className:"w-3 h-3"}),"Siswa"]});return e.jsxs(k,{children:[e.jsx(v,{title:"Kelola Pengguna"}),e.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Kelola Pengguna"}),e.jsxs("p",{className:"text-gray-600",children:[t.total," pengguna terdaftar"]})]}),e.jsxs("button",{onClick:()=>p(),className:"btn btn-primary",children:[e.jsx(S,{className:"w-5 h-5 mr-2"}),"Tambah Pengguna"]})]}),e.jsx("div",{className:"card mb-6",children:e.jsxs("div",{className:"p-4 flex flex-wrap gap-4",children:[e.jsx("div",{className:"flex-1 min-w-[200px]",children:e.jsxs("div",{className:"relative",children:[e.jsx(R,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 -translate-y-1/2"}),e.jsx("input",{type:"text",value:d,onChange:a=>u(a.target.value),placeholder:"Cari nama atau email...",className:"input pl-10 w-full",onKeyDown:a=>a.key==="Enter"&&x()})]})}),e.jsxs("select",{value:o,onChange:a=>g(a.target.value),className:"input min-w-[150px]",children:[e.jsx("option",{value:"",children:"Semua Role"}),e.jsx("option",{value:"admin",children:"Admin"}),e.jsx("option",{value:"siswa",children:"Siswa"})]}),e.jsx("button",{onClick:x,className:"btn btn-secondary",children:"Filter"})]})}),e.jsx("div",{className:"card overflow-hidden",children:t.data.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(A,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Tidak Ada Pengguna"}),e.jsx("p",{className:"text-gray-600",children:d||o?"Coba ubah filter pencarian":"Belum ada pengguna terdaftar"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Pengguna"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Sekolah"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Bergabung"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Aktivitas"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Aksi"})]})}),e.jsx("tbody",{className:"divide-y",children:t.data.map(a=>{var n;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-full flex items-center justify-center text-indigo-600 font-medium",children:((n=a.name)==null?void 0:n.charAt(0).toUpperCase())||"?"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:a.name}),e.jsx("p",{className:"text-sm text-gray-500",children:a.email})]})]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:a.school||"-"}),e.jsx("td",{className:"px-6 py-4",children:b(a.role)}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:$(new Date(a.created_at),"dd MMM yyyy",{locale:P})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("p",{className:"text-gray-900",children:[a.sessions_count||0," ujian"]}),a.average_score&&e.jsxs("p",{className:"text-gray-500",children:["Rata-rata: ",a.average_score,"%"]})]})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>p(a),className:"p-2 text-gray-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg",children:e.jsx(C,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>N(a),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg",children:e.jsx(F,{className:"w-5 h-5"})})]})})]},a.id)})})]})})}),t.last_page>1&&e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsx("nav",{className:"flex gap-1",children:t.links.map((a,n)=>e.jsx(w,{href:a.url||"#",className:`px-3 py-2 rounded text-sm ${a.active?"bg-indigo-600 text-white":a.url?"bg-white text-gray-600 hover:bg-gray-50":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,preserveState:!0,dangerouslySetInnerHTML:{__html:a.label}},n))})}),j&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:l?"Edit Pengguna":"Tambah Pengguna"})}),e.jsxs("form",{onSubmit:f,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Nama Lengkap ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:s.data.name,onChange:a=>s.setData("name",a.target.value),className:`input w-full ${s.errors.name?"border-red-500":""}`}),s.errors.name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.errors.name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",value:s.data.email,onChange:a=>s.setData("email",a.target.value),className:`input w-full ${s.errors.email?"border-red-500":""}`}),s.errors.email&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.errors.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"No. Telepon"}),e.jsx("input",{type:"text",value:s.data.phone,onChange:a=>s.setData("phone",a.target.value),className:"input w-full"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Asal Sekolah"}),e.jsx("input",{type:"text",value:s.data.school,onChange:a=>s.setData("school",a.target.value),className:"input w-full"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Password ",!l&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"password",value:s.data.password,onChange:a=>s.setData("password",a.target.value),className:`input w-full ${s.errors.password?"border-red-500":""}`,placeholder:l?"Kosongkan jika tidak diubah":""}),s.errors.password&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.errors.password})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Konfirmasi Password"}),e.jsx("input",{type:"password",value:s.data.password_confirmation,onChange:a=>s.setData("password_confirmation",a.target.value),className:"input w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),e.jsxs("select",{value:s.data.role,onChange:a=>s.setData("role",a.target.value),className:"input w-full",children:[e.jsx("option",{value:"siswa",children:"Siswa"}),e.jsx("option",{value:"admin",children:"Admin"})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:()=>r(!1),className:"btn btn-secondary flex-1",children:"Batal"}),e.jsx("button",{type:"submit",disabled:s.processing,className:"btn btn-primary flex-1",children:s.processing?"Menyimpan...":"Simpan"})]})]})]})})]})}export{V as default};
