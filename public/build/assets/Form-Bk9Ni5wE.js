import{j as e}from"./app-Nug6AceN.js";import{r as i,G as v,S as y,x as p,A as b}from"./inertia-BH-W5z_F.js";import{A as w}from"./AdminLayout-BciyKWd9.js";import{F as k}from"./ArrowLeftIcon-DQ60BSYJ.js";import{F as _}from"./XMarkIcon-DRZff1gW.js";import{F as S}from"./PhotoIcon-BEm9BK0E.js";import"./vendor-B3w1EZq-.js";import"./clsx-wMeOeRoz.js";import"./DocumentTextIcon-Bv7v4BJx.js";import"./ChartBarIcon-C_T0qa3q.js";function C({title:a,titleId:d,...n},m){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:m,"aria-labelledby":d},n),a?i.createElement("title",{id:d},a):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"}))}const E=i.forwardRef(C);function K({question:a=null,categories:d=[]}){const n=!!a,[m,x]=i.useState(a!=null&&a.image?`/storage/${a.image}`:null),f=i.useRef(null),{data:l,setData:t,post:P,put:$,processing:h,errors:o}=v({question_text:(a==null?void 0:a.question_text)||"",option_a:(a==null?void 0:a.option_a)||"",option_b:(a==null?void 0:a.option_b)||"",option_c:(a==null?void 0:a.option_c)||"",option_d:(a==null?void 0:a.option_d)||"",option_e:(a==null?void 0:a.option_e)||"",correct_answer:(a==null?void 0:a.correct_answer)||"A",explanation:(a==null?void 0:a.explanation)||"",difficulty:(a==null?void 0:a.difficulty)||"medium",subcategory_id:(a==null?void 0:a.subcategory_id)||"",image:null}),j=r=>{r.preventDefault();const s=new FormData;Object.entries(l).forEach(([g,c])=>{g==="image"&&c?s.append("image",c):c!==null&&c!==""&&s.append(g,c)}),n?(s.append("_method","PUT"),b.post(route("admin.questions.update",a.id),s)):b.post(route("admin.questions.store"),s)},u=r=>{const s=r.target.files[0];s&&(t("image",s),x(URL.createObjectURL(s)))},N=()=>{t("image",null),x(null)};return d.flatMap(r=>(r.subcategories||[]).map(s=>({...s,categoryName:r.name,categoryColor:r.color}))),e.jsxs(w,{children:[e.jsx(y,{title:n?"Edit Soal":"Tambah Soal"}),e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs(p,{href:route("admin.questions.index"),className:"inline-flex items-center text-gray-600 hover:text-gray-900 mb-4",children:[e.jsx(k,{className:"w-4 h-4 mr-1"}),"Kembali ke Bank Soal"]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:n?"Edit Soal":"Tambah Soal Baru"})]}),e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"font-semibold text-gray-900",children:"Pertanyaan"})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Teks Soal ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{ref:f,value:l.question_text,onChange:r=>t("question_text",r.target.value),rows:5,className:`input w-full font-mono text-sm ${o.question_text?"border-red-500":""}`,placeholder:"Masukkan soal di sini. Anda bisa menggunakan HTML untuk formatting..."}),o.question_text&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.question_text}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"ðŸ’¡ Tip: Gunakan tag HTML seperti <b>, <i>, <sup>, <sub> untuk formatting"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gambar (Opsional)"}),m?e.jsxs("div",{className:"relative inline-block",children:[e.jsx("img",{src:m,alt:"Preview",className:"max-w-md h-auto rounded-lg border"}),e.jsx("button",{type:"button",onClick:N,className:"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600",children:e.jsx(_,{className:"w-5 h-5"})})]}):e.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-dashed border-gray-300 rounded-xl cursor-pointer hover:border-indigo-500 hover:bg-indigo-50 transition-colors",children:[e.jsx(S,{className:"w-10 h-10 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-500 mt-2",children:"Klik untuk upload gambar"}),e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:u})]})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"font-semibold text-gray-900",children:"Pilihan Jawaban"})}),e.jsxs("div",{className:"p-6 space-y-4",children:[["A","B","C","D","E"].map(r=>e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("button",{type:"button",onClick:()=>t("correct_answer",r),className:`w-10 h-10 rounded-full flex items-center justify-center font-bold shrink-0 transition-colors ${l.correct_answer===r?"bg-emerald-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,title:`Tandai ${r} sebagai jawaban benar`,children:r}),e.jsx("div",{className:"flex-1",children:e.jsx("textarea",{value:l[`option_${r.toLowerCase()}`],onChange:s=>t(`option_${r.toLowerCase()}`,s.target.value),rows:2,className:`input w-full text-sm ${l.correct_answer===r?"border-emerald-300 bg-emerald-50":""}`,placeholder:`Pilihan ${r}...`})})]},r)),e.jsxs("div",{className:"flex items-start gap-2 mt-4 p-3 bg-blue-50 rounded-lg",children:[e.jsx(E,{className:"w-5 h-5 text-blue-500 shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Klik huruf untuk menandai sebagai jawaban yang benar. Opsi E bersifat opsional untuk soal dengan 4 pilihan."})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"font-semibold text-gray-900",children:"Pembahasan"})}),e.jsx("div",{className:"p-6",children:e.jsx("textarea",{value:l.explanation,onChange:r=>t("explanation",r.target.value),rows:4,className:"input w-full",placeholder:"Jelaskan bagaimana mendapatkan jawaban yang benar..."})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"font-semibold text-gray-900",children:"Pengaturan"})}),e.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subkategori"}),e.jsxs("select",{value:l.subcategory_id,onChange:r=>t("subcategory_id",r.target.value),className:"input w-full",children:[e.jsx("option",{value:"",children:"Pilih Subkategori"}),d.map(r=>e.jsx("optgroup",{label:r.name,children:(r.subcategories||[]).map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))},r.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tingkat Kesulitan"}),e.jsxs("select",{value:l.difficulty,onChange:r=>t("difficulty",r.target.value),className:"input w-full",children:[e.jsx("option",{value:"easy",children:"Mudah"}),e.jsx("option",{value:"medium",children:"Sedang"}),e.jsx("option",{value:"hard",children:"Sulit"})]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4",children:[e.jsx(p,{href:route("admin.questions.index"),className:"btn btn-secondary",children:"Batal"}),e.jsx("button",{type:"submit",disabled:h,className:"btn btn-primary",children:h?"Menyimpan...":n?"Simpan Perubahan":"Simpan Soal"})]})]})]})]})}export{K as default};
