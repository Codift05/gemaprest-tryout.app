import{j as e}from"./app-Nug6AceN.js";import{r as t,G as y,S as R,A as w}from"./inertia-BH-W5z_F.js";import{A as _}from"./AdminLayout-BciyKWd9.js";import{F as g,a as k,b as C}from"./TrashIcon-D85zUF_K.js";import{F as $}from"./ChevronRightIcon-CsONSXmh.js";import"./vendor-B3w1EZq-.js";import"./clsx-wMeOeRoz.js";import"./XMarkIcon-DRZff1gW.js";import"./DocumentTextIcon-Bv7v4BJx.js";import"./ChartBarIcon-C_T0qa3q.js";function B({title:r,titleId:l,...o},d){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":l},o),r?t.createElement("title",{id:l},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const T=t.forwardRef(B);function L({title:r,titleId:l,...o},d){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":l},o),r?t.createElement("title",{id:l},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"}))}const O=t.forwardRef(L);function U({categories:r}){const[l,o]=t.useState([]),[d,m]=t.useState(!1),[S,x]=t.useState(!1),[u,b]=t.useState(null),[h,f]=t.useState(null),[H,D]=t.useState(null),s=y({name:"",color:"#6366f1",description:""}),n=y({name:"",description:"",category_id:""}),E=a=>{l.includes(a)?o(l.filter(i=>i!==a)):o([...l,a])},p=(a=null)=>{a?(b(a),s.setData({name:a.name,color:a.color,description:a.description||""})):(b(null),s.reset()),m(!0)},j=(a=null,i=null)=>{a?(f(a),n.setData({name:a.name,description:a.description||"",category_id:a.category_id})):(f(null),n.setData({name:"",description:"",category_id:i})),D(i),x(!0)},F=a=>{a.preventDefault(),u?s.put(route("admin.categories.update",u.id),{onSuccess:()=>m(!1)}):s.post(route("admin.categories.store"),{onSuccess:()=>m(!1)})},K=a=>{a.preventDefault(),h?n.put(route("admin.subcategories.update",h.id),{onSuccess:()=>x(!1)}):n.post(route("admin.subcategories.store"),{onSuccess:()=>x(!1)})},A=a=>{confirm(`Hapus kategori "${a.name}"? Semua subkategori akan ikut terhapus.`)&&w.delete(route("admin.categories.destroy",a.id))},M=a=>{confirm(`Hapus subkategori "${a.name}"?`)&&w.delete(route("admin.subcategories.destroy",a.id))};return e.jsxs(_,{children:[e.jsx(R,{title:"Kelola Kategori"}),e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Kelola Kategori"}),e.jsx("p",{className:"text-gray-600",children:"Organisasi materi dan soal tryout"})]}),e.jsxs("button",{onClick:()=>p(),className:"btn btn-primary",children:[e.jsx(g,{className:"w-5 h-5 mr-2"}),"Tambah Kategori"]})]}),e.jsx("div",{className:"card",children:r.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(O,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Belum Ada Kategori"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Buat kategori untuk mengelompokkan soal Anda"}),e.jsxs("button",{onClick:()=>p(),className:"btn btn-primary",children:[e.jsx(g,{className:"w-5 h-5 mr-2"}),"Tambah Kategori"]})]}):e.jsx("div",{className:"divide-y",children:r.map(a=>{var N,v;const i=l.includes(a.id);return e.jsxs("div",{children:[e.jsxs("div",{className:"p-4 flex items-center gap-4 hover:bg-gray-50",children:[e.jsx("button",{onClick:()=>E(a.id),className:"p-1 hover:bg-gray-200 rounded",children:i?e.jsx(T,{className:"w-5 h-5 text-gray-400"}):e.jsx($,{className:"w-5 h-5 text-gray-400"})}),e.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:a.color}}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:a.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[((N=a.subcategories)==null?void 0:N.length)||0," subkategori â€¢"," ",a.questions_count||0," soal"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>j(null,a.id),className:"btn btn-secondary btn-sm",children:[e.jsx(g,{className:"w-4 h-4 mr-1"}),"Sub"]}),e.jsx("button",{onClick:()=>p(a),className:"p-2 text-gray-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg",children:e.jsx(k,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>A(a),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg",children:e.jsx(C,{className:"w-5 h-5"})})]})]}),i&&((v=a.subcategories)==null?void 0:v.length)>0&&e.jsx("div",{className:"bg-gray-50 border-t",children:a.subcategories.map(c=>e.jsxs("div",{className:"pl-16 pr-4 py-3 flex items-center gap-4 border-b last:border-b-0",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-700",children:c.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[c.questions_count||0," soal"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>j(c,a.id),className:"p-2 text-gray-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg",children:e.jsx(k,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>M(c),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg",children:e.jsx(C,{className:"w-4 h-4"})})]})]},c.id))})]},a.id)})})}),d&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-md w-full p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:u?"Edit Kategori":"Tambah Kategori"}),e.jsxs("form",{onSubmit:F,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nama Kategori"}),e.jsx("input",{type:"text",value:s.data.name,onChange:a=>s.setData("name",a.target.value),className:"input w-full",placeholder:"Contoh: TPS, TKA Saintek"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Warna"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"color",value:s.data.color,onChange:a=>s.setData("color",a.target.value),className:"w-12 h-10 rounded cursor-pointer"}),e.jsx("input",{type:"text",value:s.data.color,onChange:a=>s.setData("color",a.target.value),className:"input flex-1",placeholder:"#6366f1"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Deskripsi (Opsional)"}),e.jsx("textarea",{value:s.data.description,onChange:a=>s.setData("description",a.target.value),rows:2,className:"input w-full"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>m(!1),className:"btn btn-secondary flex-1",children:"Batal"}),e.jsx("button",{type:"submit",disabled:s.processing,className:"btn btn-primary flex-1",children:s.processing?"Menyimpan...":"Simpan"})]})]})]})}),S&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-md w-full p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:h?"Edit Subkategori":"Tambah Subkategori"}),e.jsxs("form",{onSubmit:K,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nama Subkategori"}),e.jsx("input",{type:"text",value:n.data.name,onChange:a=>n.setData("name",a.target.value),className:"input w-full",placeholder:"Contoh: Penalaran Verbal, Fisika"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kategori Induk"}),e.jsx("select",{value:n.data.category_id,onChange:a=>n.setData("category_id",a.target.value),className:"input w-full",children:r.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Deskripsi (Opsional)"}),e.jsx("textarea",{value:n.data.description,onChange:a=>n.setData("description",a.target.value),rows:2,className:"input w-full"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>x(!1),className:"btn btn-secondary flex-1",children:"Batal"}),e.jsx("button",{type:"submit",disabled:n.processing,className:"btn btn-primary flex-1",children:n.processing?"Menyimpan...":"Simpan"})]})]})]})})]})}export{U as default};
