import{j as e}from"./app-Nug6AceN.js";import{r as _,G as w,S as k,x as p,A as b}from"./inertia-BH-W5z_F.js";import{A as T}from"./AdminLayout-BciyKWd9.js";import{F as C}from"./ArrowLeftIcon-DQ60BSYJ.js";import{F as S}from"./XMarkIcon-DRZff1gW.js";import{F as P}from"./PhotoIcon-BEm9BK0E.js";import"./vendor-B3w1EZq-.js";import"./clsx-wMeOeRoz.js";import"./DocumentTextIcon-Bv7v4BJx.js";import"./ChartBarIcon-C_T0qa3q.js";function M({tryout:a=null,categories:g=[]}){var h;const r=!!a,[c,x]=_.useState(a!=null&&a.thumbnail?`/storage/${a.thumbnail}`:null),{data:i,setData:n,post:D,put:F,processing:o,errors:m}=w({title:(a==null?void 0:a.title)||"",description:(a==null?void 0:a.description)||"",duration_minutes:(a==null?void 0:a.duration_minutes)||90,max_attempts:(a==null?void 0:a.max_attempts)||1,max_violations:(a==null?void 0:a.max_violations)||5,passing_score:(a==null?void 0:a.passing_score)||60,is_active:(a==null?void 0:a.is_active)??!0,is_randomized:(a==null?void 0:a.is_randomized)??!1,show_result:(a==null?void 0:a.show_result)??!0,show_leaderboard:(a==null?void 0:a.show_leaderboard)??!0,allow_review:(a==null?void 0:a.allow_review)??!0,start_date:a!=null&&a.start_date?a.start_date.slice(0,16):"",end_date:a!=null&&a.end_date?a.end_date.slice(0,16):"",category_ids:((h=a==null?void 0:a.categories)==null?void 0:h.map(s=>s.id))||[],thumbnail:null}),j=s=>{s.preventDefault();const l=new FormData;Object.entries(i).forEach(([d,t])=>{d==="category_ids"?t.forEach(N=>l.append("category_ids[]",N)):d==="thumbnail"&&t?l.append("thumbnail",t):t!==null&&t!==""&&l.append(d,t)}),r?(l.append("_method","PUT"),b.post(route("admin.tryouts.update",a.id),l)):b.post(route("admin.tryouts.store"),l)},u=s=>{const l=s.target.files[0];l&&(n("thumbnail",l),x(URL.createObjectURL(l)))},f=()=>{n("thumbnail",null),x(null)},v=s=>{const l=i.category_ids;l.includes(s)?n("category_ids",l.filter(d=>d!==s)):n("category_ids",[...l,s])};return e.jsxs(T,{children:[e.jsx(k,{title:r?"Edit Tryout":"Tambah Tryout"}),e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs(p,{href:route("admin.tryouts.index"),className:"inline-flex items-center text-gray-600 hover:text-gray-900 mb-4",children:[e.jsx(C,{className:"w-4 h-4 mr-1"}),"Kembali"]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:r?"Edit Tryout":"Tambah Tryout Baru"})]}),e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"font-semibold text-gray-900",children:"Informasi Dasar"})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Thumbnail"}),c?e.jsxs("div",{className:"relative w-full h-48 rounded-xl overflow-hidden",children:[e.jsx("img",{src:c,alt:"Preview",className:"w-full h-full object-cover"}),e.jsx("button",{type:"button",onClick:f,className:"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600",children:e.jsx(S,{className:"w-5 h-5"})})]}):e.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-48 border-2 border-dashed border-gray-300 rounded-xl cursor-pointer hover:border-indigo-500 hover:bg-indigo-50 transition-colors",children:[e.jsx(P,{className:"w-12 h-12 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-500 mt-2",children:"Klik untuk upload thumbnail"}),e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:u})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Judul Tryout ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:i.title,onChange:s=>n("title",s.target.value),className:`input w-full ${m.title?"border-red-500":""}`,placeholder:"Contoh: UTBK SNBT 2024 - Paket 1"}),m.title&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:m.title})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Deskripsi"}),e.jsx("textarea",{value:i.description,onChange:s=>n("description",s.target.value),rows:3,className:"input w-full",placeholder:"Deskripsi singkat tentang tryout..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Kategori"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:g.map(s=>e.jsx("button",{type:"button",onClick:()=>v(s.id),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${i.category_ids.includes(s.id)?"text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,style:i.category_ids.includes(s.id)?{backgroundColor:s.color}:{},children:s.name},s.id))})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"font-semibold text-gray-900",children:"Pengaturan Ujian"})}),e.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Durasi (menit) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",min:"1",value:i.duration_minutes,onChange:s=>n("duration_minutes",parseInt(s.target.value)),className:"input w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Maksimal Percobaan"}),e.jsx("input",{type:"number",min:"1",value:i.max_attempts,onChange:s=>n("max_attempts",parseInt(s.target.value)),className:"input w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Maks. Pelanggaran"}),e.jsx("input",{type:"number",min:"1",value:i.max_violations,onChange:s=>n("max_violations",parseInt(s.target.value)),className:"input w-full"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Ujian otomatis diserahkan jika melebihi batas"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nilai Kelulusan (%)"}),e.jsx("input",{type:"number",min:"0",max:"100",value:i.passing_score,onChange:s=>n("passing_score",parseInt(s.target.value)),className:"input w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Waktu Mulai"}),e.jsx("input",{type:"datetime-local",value:i.start_date,onChange:s=>n("start_date",s.target.value),className:"input w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Waktu Berakhir"}),e.jsx("input",{type:"datetime-local",value:i.end_date,onChange:s=>n("end_date",s.target.value),className:"input w-full"})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"font-semibold text-gray-900",children:"Opsi Lainnya"})}),e.jsx("div",{className:"p-6 space-y-4",children:[{key:"is_active",label:"Aktif",desc:"Tryout dapat diakses siswa"},{key:"is_randomized",label:"Acak Soal",desc:"Urutan soal diacak untuk setiap siswa"},{key:"show_result",label:"Tampilkan Hasil",desc:"Siswa dapat melihat hasil setelah ujian"},{key:"show_leaderboard",label:"Tampilkan Leaderboard",desc:"Leaderboard dapat diakses"},{key:"allow_review",label:"Izinkan Review",desc:"Siswa dapat melihat pembahasan soal"}].map(({key:s,label:l,desc:d})=>e.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:l}),e.jsx("p",{className:"text-sm text-gray-500",children:d})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"checkbox",checked:i[s],onChange:t=>n(s,t.target.checked),className:"sr-only"}),e.jsx("div",{className:`w-11 h-6 rounded-full transition-colors ${i[s]?"bg-indigo-600":"bg-gray-300"}`,children:e.jsx("div",{className:`w-5 h-5 bg-white rounded-full shadow transform transition-transform ${i[s]?"translate-x-5":"translate-x-0.5"} mt-0.5`})})]})]},s))})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4",children:[e.jsx(p,{href:route("admin.tryouts.index"),className:"btn btn-secondary",children:"Batal"}),e.jsx("button",{type:"submit",disabled:o,className:"btn btn-primary",children:o?"Menyimpan...":r?"Simpan Perubahan":"Buat Tryout"})]})]})]})]})}export{M as default};
