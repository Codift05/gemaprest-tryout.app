import{j as e}from"./app-Nug6AceN.js";import{r as l,S as w,x as u,A as f}from"./inertia-BH-W5z_F.js";import{A as k}from"./AdminLayout-BciyKWd9.js";import{F as S}from"./ArrowLeftIcon-DQ60BSYJ.js";import{F as b,a as C,b as F}from"./TrashIcon-D85zUF_K.js";import{F as _}from"./CheckCircleIcon--pLsEsWR.js";import"./vendor-B3w1EZq-.js";import"./clsx-wMeOeRoz.js";import"./XMarkIcon-DRZff1gW.js";import"./DocumentTextIcon-Bv7v4BJx.js";import"./ChartBarIcon-C_T0qa3q.js";function $({title:r,titleId:i,...d},c){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:c,"aria-labelledby":i},d),r?l.createElement("title",{id:i},r):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"}))}const A=l.forwardRef($);function z({tryout:r,questions:i,availableQuestions:d}){const[c,n]=l.useState(!1),[s,o]=l.useState([]),[m,y]=l.useState(""),j=a=>{confirm("Hapus soal dari tryout ini?")&&f.delete(route("admin.tryouts.questions.remove",[r.id,a]))},p=()=>{s.length!==0&&f.post(route("admin.tryouts.questions.add",r.id),{question_ids:s},{onSuccess:()=>{n(!1),o([])}})},N=a=>{s.includes(a)?o(s.filter(t=>t!==a)):o([...s,a])},x=d.filter(a=>{var t;return m?((t=a.subcategory)==null?void 0:t.category_id)==m:!0}),v=[...new Map(d.filter(a=>{var t;return(t=a.subcategory)==null?void 0:t.category}).map(a=>[a.subcategory.category.id,a.subcategory.category])).values()];return e.jsxs(k,{children:[e.jsx(w,{title:`Soal - ${r.title}`}),e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs(u,{href:route("admin.tryouts.index"),className:"inline-flex items-center text-gray-600 hover:text-gray-900 mb-4",children:[e.jsx(S,{className:"w-4 h-4 mr-1"}),"Kembali ke Daftar Tryout"]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:r.title}),e.jsxs("p",{className:"text-gray-600",children:[i.length," soal • Durasi ",r.duration_minutes," menit"]})]}),e.jsxs("button",{onClick:()=>n(!0),className:"btn btn-primary",children:[e.jsx(b,{className:"w-5 h-5 mr-2"}),"Tambah Soal"]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"font-semibold text-gray-900",children:"Daftar Soal"})}),i.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(A,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Belum Ada Soal"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Tambahkan soal dari bank soal untuk tryout ini"}),e.jsxs("button",{onClick:()=>n(!0),className:"btn btn-primary",children:[e.jsx(b,{className:"w-5 h-5 mr-2"}),"Tambah Soal"]})]}):e.jsx("div",{className:"divide-y",children:i.map((a,t)=>{var h,g;return e.jsxs("div",{className:"p-4 flex items-start gap-4 hover:bg-gray-50",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center text-sm font-medium text-gray-600 shrink-0",children:t+1}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.subcategory&&e.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium",style:{backgroundColor:`${(h=a.subcategory.category)==null?void 0:h.color}20`,color:(g=a.subcategory.category)==null?void 0:g.color},children:a.subcategory.name}),e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${a.difficulty==="easy"?"bg-emerald-100 text-emerald-700":a.difficulty==="medium"?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700"}`,children:a.difficulty==="easy"?"Mudah":a.difficulty==="medium"?"Sedang":"Sulit"})]}),e.jsx("div",{className:"prose prose-sm max-w-none text-gray-900 line-clamp-2",dangerouslySetInnerHTML:{__html:a.question_text}}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Jawaban: ",e.jsx("span",{className:"font-medium",children:a.correct_answer})]})]}),e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[e.jsx(u,{href:route("admin.questions.edit",a.id),className:"p-2 text-gray-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg",children:e.jsx(C,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>j(a.id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg",children:e.jsx(F,{className:"w-5 h-5"})})]})]},a.id)})})]})]}),c&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-4xl w-full max-h-[80vh] flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Tambah Soal dari Bank Soal"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.length," soal dipilih"]})]}),e.jsx("button",{onClick:()=>n(!1),className:"p-2 text-gray-400 hover:text-gray-600",children:"✕"})]}),e.jsx("div",{className:"p-4 border-b bg-gray-50",children:e.jsxs("select",{value:m,onChange:a=>y(a.target.value),className:"input",children:[e.jsx("option",{value:"",children:"Semua Kategori"}),v.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:x.length===0?e.jsx("div",{className:"text-center py-12 text-gray-500",children:"Tidak ada soal tersedia"}):e.jsx("div",{className:"space-y-2",children:x.map(a=>e.jsx("button",{onClick:()=>N(a.id),className:`w-full text-left p-4 rounded-xl border-2 transition-colors ${s.includes(a.id)?"border-indigo-600 bg-indigo-50":"border-gray-200 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center shrink-0 ${s.includes(a.id)?"bg-indigo-600 text-white":"bg-gray-200"}`,children:s.includes(a.id)&&e.jsx(_,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"flex items-center gap-2 mb-1",children:a.subcategory&&e.jsx("span",{className:"text-xs text-gray-500",children:a.subcategory.name})}),e.jsx("div",{className:"prose prose-sm max-w-none text-gray-900 line-clamp-2",dangerouslySetInnerHTML:{__html:a.question_text}})]})]})},a.id))})}),e.jsxs("div",{className:"p-4 border-t flex items-center justify-end gap-4",children:[e.jsx("button",{onClick:()=>n(!1),className:"btn btn-secondary",children:"Batal"}),e.jsxs("button",{onClick:p,disabled:s.length===0,className:"btn btn-primary",children:["Tambah ",s.length," Soal"]})]})]})})]})}export{z as default};
